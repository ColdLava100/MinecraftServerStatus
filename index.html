<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Server Status</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">
            <img src="logo.png" alt="Server Logo">
        </div>
    </nav>

    <div class="container">
        <h1>Java Server Status</h1>
        <p><strong>IP:</strong> <span id="java-ip">coldlava.ddns.net</span> 
            <button class="copy-btn" onclick="copyText('java-ip')">ğŸ“‹ Copy</button>
        </p>
        <p><strong>Port:</strong> <span id="java-port">16359</span> 
            <button class="copy-btn" onclick="copyText('java-port')">ğŸ“‹ Copy</button>
        </p>
        <p id="java-status" class="status">Checking...</p>
        <h2>Online Players:</h2>
        <ul id="java-player-list">Loading...</ul>

        <h1>Bedrock Server Status</h1>
        <p><strong>IP:</strong> <span id="bedrock-ip">coldlavabedrock.ddns.net</span> 
            <button class="copy-btn" onclick="copyText('bedrock-ip')">ğŸ“‹ Copy</button>
        </p>
        <p><strong>Port:</strong> <span id="bedrock-port">58942</span> 
            <button class="copy-btn" onclick="copyText('bedrock-port')">ğŸ“‹ Copy</button>
        </p>
        <p id="bedrock-status" class="status">Checking...</p>
        <h2>Online Players:</h2>
        <ul id="bedrock-player-list">Loading...</ul>
    </div>

    <script>
        // Function to Copy Text
        function copyText(elementId) {
            const text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("Copied: " + text);
            }).catch(err => {
                console.error("Failed to copy", err);
            });
        }

        async function checkServer(type, ip, port, statusId, playerListId) {
            const url = type === "java" 
                ? `https://api.mcsrvstat.us/2/${ip}:${port}` 
                : `https://api.mcsrvstat.us/bedrock/2/${ip}:${port}`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                const statusElement = document.getElementById(statusId);
                const playerListElement = document.getElementById(playerListId);

                if (data.online) {
                    statusElement.innerText = `âœ… Online - ${data.players.online}/${data.players.max} players`;
                    statusElement.className = "status online";

                    if (data.players.list && data.players.list.length > 0) {
                        playerListElement.innerHTML = data.players.list.map(player => `<li>${player}</li>`).join('');
                    } else {
                        playerListElement.innerHTML = "<li>No players online</li>";
                    }
                } else {
                    statusElement.innerText = "âŒ Offline";
                    statusElement.className = "status offline";
                    playerListElement.innerHTML = "<li>Server is offline</li>";
                }
            } catch (error) {
                document.getElementById(statusId).innerText = "âš ï¸ Error checking status";
                document.getElementById(statusId).className = "status maintenance";
                document.getElementById(playerListId).innerHTML = "<li>Could not retrieve player list</li>";
            }
        }

        checkServer("java", "coldlava.ddns.net", "16359", "java-status", "java-player-list");
        checkServer("bedrock", "coldlavabedrock.ddns.net", "58942", "bedrock-status", "bedrock-player-list");
    </script>
</body>
</html>
